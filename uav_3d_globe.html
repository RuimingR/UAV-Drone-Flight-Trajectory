<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>UAV 3D Globe (Cesium)</title>
  <style>html, body, #cesiumContainer {width: 100%; height: 100%; margin: 0; padding: 0; overflow: hidden;}</style>
  <script src="https://unpkg.com/cesium@1.121/Build/Cesium/Cesium.js"></script>
  <link href="https://unpkg.com/cesium@1.121/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
</head>
<body>
  <div id="cesiumContainer"></div>
  <script>
    // --- Token & imagery/terrain setup with robust fallbacks ---
    Cesium.Ion.defaultAccessToken = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMWRhNWQwZS0zYjhkLTQ3MDQtOGJjYy1hZDlkY2QxZTVlYzIiLCJpZCI6MzMxMDQ3LCJpYXQiOjE3NTQ5NjgyOTB9.6L2x2C1XMH2oX7hRHV_6lZWwG8YD_KbjklkL1Xn37p4"; // it's fine if empty
    const hasToken = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMWRhNWQwZS0zYjhkLTQ3MDQtOGJjYy1hZDlkY2QxZTVlYzIiLCJpZCI6MzMxMDQ3LCJpYXQiOjE3NTQ5NjgyOTB9.6L2x2C1XMH2oX7hRHV_6lZWwG8YD_KbjklkL1Xn37p4".trim().length > 0;

    // Helper: swap to OpenStreetMap tiles
    function useOSM(reason) {
      console.warn('Falling back to OSM imagery:', reason || '');
      try {
        const osm = new Cesium.UrlTemplateImageryProvider({
          url: 'https://tile.openstreetmap.org/{z}/{x}/{y}.png',
          credit: '© OpenStreetMap contributors'
        });
        viewer.imageryLayers.removeAll();
        viewer.imageryLayers.addImageryProvider(osm);
      } catch (e) {
        console.error('OSM fallback failed:', e);
      }
    }

    // Create the viewer first with a neutral configuration;
    // we will attach imagery right after so we can fallback if needed.
    const viewer = new Cesium.Viewer('cesiumContainer', {
      baseLayerPicker: false,     // lock imagery to the chosen provider
      geocoder: false,
      animation: true,
      timeline: true,
      terrain: hasToken ? Cesium.Terrain.fromWorldTerrain() : undefined
    });

    // Ensure a globe is present and visible
    if (!viewer.scene.globe) {
      viewer.scene.globe = new Cesium.Globe(Cesium.Ellipsoid.WGS84);
    }
    viewer.scene.globe.show = true;
    // Make sure geometry isn't hidden by terrain depth testing
    viewer.scene.globe.depthTestAgainstTerrain = false;
    // Optional atmosphere; wrap in try so older/newer builds don't break
    try { viewer.scene.skyAtmosphere = new Cesium.SkyAtmosphere(); } catch (e) {}
    // Avoid SkyBox.createDefaultCubeMap() which is not available in some Cesium builds
    viewer.scene.skyBox = undefined;

    // Prefer Cesium World Imagery (satellite) when token is present; fallback to OSM
    try {
      viewer.imageryLayers.removeAll();
      if (hasToken) {
        try {
          viewer.imageryLayers.addImageryProvider(
            new Cesium.IonImageryProvider({ assetId: 2 }) // Cesium World Imagery (satellite)
          );
        } catch (e) {
          console.warn('Ion imagery failed, falling back to OSM:', e);
          viewer.imageryLayers.addImageryProvider(
            new Cesium.UrlTemplateImageryProvider({
              url: 'https://tile.openstreetmap.org/{z}/{x}/{y}.png',
              credit: '© OpenStreetMap contributors'
            })
          );
        }
      } else {
        viewer.imageryLayers.addImageryProvider(
          new Cesium.UrlTemplateImageryProvider({
            url: 'https://tile.openstreetmap.org/{z}/{x}/{y}.png',
            credit: '© OpenStreetMap contributors'
          })
        );
      }
    } catch (e) {
      console.warn('Imagery setup error:', e);
    }

    // ---- 3D base: world terrain + OSM 3D Buildings (requires Ion token) ----
    try {
      if (hasToken) {
        // Prefer newer API if available; otherwise, keep earlier syntax
        if (Cesium.Terrain && Cesium.Terrain.fromWorldTerrain) {
          viewer.terrainProvider = Cesium.Terrain.fromWorldTerrain();
        } else if (Cesium.CesiumTerrainProvider && Cesium.IonResource) {
          viewer.terrainProvider = new Cesium.CesiumTerrainProvider({
            url: Cesium.IonResource.fromAssetId(1)
          });
        }

        // Add OSM 3D Buildings – API name differs across Cesium versions
        const addOSMBuildings = () => {
          try {
            if (Cesium.createOsmBuildingsAsync) {
              Cesium.createOsmBuildingsAsync().then(ts => {
                viewer.scene.primitives.add(ts);
              });
            } else if (Cesium.createOsmBuildings) {
              viewer.scene.primitives.add(Cesium.createOsmBuildings());
            }
          } catch (e) {
            console.warn('OSM Buildings not available:', e);
          }
        };
        addOSMBuildings();

        // Lighting/shadows to enhance 3D appearance
        viewer.scene.globe.enableLighting = true;
        viewer.shadows = true;
      }
    } catch (e) {
      console.warn('Terrain/Buildings setup failed:', e);
    }

    // -------- Build UAV positions, path, and animated entity (more visible) --------
    const flat = [-122.42152728959444,37.77239080237695,218.13836831001433,-122.42763731138048,37.76801989040673,439.5654465458017,-122.42609000450672,37.76531168988592,448.7332851929863,-122.42516508275897,37.76856809019707,56.3358484773008,-122.41606145105082,37.77713705789445,129.66948253777883,-122.41884824053456,37.78060351922786,118.46654911378243,-122.42334449743456,37.77705089703803,52.402613886359845,-122.42180525190356,37.78106794696233,205.15411789454143,-122.41415575883372,37.7673407646969,464.8800335597376,-122.41735061659084,37.77815044568708,328.7080876713345,-122.42544888188642,37.78429169255529,414.4609041377406,-122.41623385120988,37.78333748470047,264.70839532805746,-122.41074264619746,37.77267354579379,166.17117544631526,-122.42866574113032,37.77575392166317,344.22348372245494,-122.41834370248564,37.78034489538594,471.3542390292025,-122.41903979137248,37.77948014336082,173.36127523637225,-122.42790208315996,37.782162068517515,314.7951003873912,-122.419301770975,37.771403666440534,325.54007997817854,-122.42867077898347,37.76729188491877,149.5744659797828,-122.42064200225714,37.77477591192729,222.2708935835767,-122.4204184297173,37.76552858371374,487.44319694554,-122.42726752762128,37.76988584458298,150.17163644355696,-122.40999851086666,37.77069502905828,168.2963158951967,-122.41678459159654,37.78232921180376,127.26229690782104,-122.42303920776612,37.78104880310328,59.22991369417603,-122.41719273984364,37.77344215577253,419.5067470183309,-122.41821563736464,37.773248220062975,497.07570217806864,-122.42186027665426,37.771364058640415,56.511788676289264,-122.41788669494004,37.78414894589884,64.33554313771704,-122.41180324504116,37.76563773894709,400.9184040304146,-122.4232061657779,37.783065317719334,449.9119466531593,-122.42338067360735,37.769741105430235,237.6748563047175,-122.41706756043668,37.77225566265439,299.0888984107325,-122.40970691044818,37.78160604991179,106.52571658413594,-122.42088988681456,37.77845128723685,283.50028924298664,-122.41306689513596,37.768387328580104,79.17539845378604,-122.42164054491204,37.771721327021005,355.6924993910991,-122.41057331214424,37.77809968092068,272.65745972384303,-122.42275654955876,37.76676205535612,333.6804167161998,-122.4134400392956,37.771884191492255,468.17629325861407,-122.42331019151293,37.77774063292309,284.5704892208296,-122.42185596435084,37.76508394103234,142.33227502782233,-122.41044627645871,37.775874675787335,489.1924037266025,-122.41723577246466,37.76964498174994,402.8278009228154,-122.42340141205054,37.77805225784601,355.5254409263015,-122.42825216312625,37.76977979286758,295.52380899221777,-122.41610521590178,37.780796226070834,280.66591637028336,-122.4292529391089,37.779349042305235,311.2788922170592,-122.40981936318416,37.78370917168706,295.7444636014809,-122.41775859737751,37.783466371251755,485.1432581126169,-122.42167898128696,37.77078897784139,364.5623363189427,-122.41978880118327,37.77603602524917,55.29429246514896,-122.4253201079278,37.777200144533985,356.68671344899263,-122.41914769511791,37.779715372355085,68.8877268095777,-122.42554647207028,37.78108722310957,222.88738321668984,-122.42485036792613,37.77493032589375,266.106521061962,-122.4096375184809,37.78270010683635,234.2833161254213,-122.41520657312992,37.765618845475935,98.65550861469322,-122.42376349993408,37.76551000499878,285.0679687850605,-122.4267113314526,37.7753448652011,490.2212686995446,-122.41372996994824,37.76593363442338,460.0554396416021,-122.41868915053804,37.78441704158925,375.8922107637665,-122.42268367270717,37.77367942841411,489.38595007282527,-122.42034350389432,37.778819484121875,289.45001022665167,-122.42374899464964,37.775884533294125,298.77880819314566,-122.41782916363591,37.77965793833392,159.03977287435146,-122.4242241518327,37.77201945357303,370.4285396341269,-122.41050585236654,37.765714576046385,403.8653236827641,-122.41318632859324,37.77473231750234,106.94500642103368,-122.4186491971272,37.77721700196105,245.57344424026405,-122.41473679243724,37.774962725171605,310.24809621693686,-122.42128709481103,37.77774838556413,82.55682945386849,-122.41733509154632,37.77266339852413,446.0591090451388,-122.4095942965883,37.77262205275602,221.1085248860256,-122.42170968372588,37.76691556002755,214.26138681747037,-122.41351971099468,37.77127951260588,272.0751638326775,-122.424912340404,37.76726329655243,404.861794298812,-122.41917812357056,37.7809696186077,137.36871347834708,-122.4266109952759,37.784710102840016,448.8693730809778,-122.42195912864376,37.78351514651207,385.4763884087477,-122.42452009395296,37.76696247737672,127.30509926499506,-122.41148888518252,37.78281046456993,118.90105059748927,-122.41564461587268,37.77128627275181,407.17284160334555,-122.42167424589708,37.77386891043957,421.55215069076513,-122.42555484163064,37.78073158087451,134.33507959269963,-122.41786910020096,37.77589057764648,428.2023117374625,-122.41725351166411,37.76775983364106,118.73769425042748,-122.41460837645556,37.778919382629184,213.43513824088217,-122.42019341898714,37.76659675428171,362.18358441424783,-122.42541813160128,37.78384497154768,372.24206712048266,-122.42360544032525,37.78044293831855,378.00596110583746,-122.42505094135564,37.77475250208582,256.6216086691601,-122.41339724834496,37.76725052493554,277.27601012168395,-122.41928148399708,37.772397411590475,215.99713470015013,-122.41565531313078,37.7651430894938,307.44491763723124,-122.42121634825082,37.78475929592239,245.946258005916,-122.4131674597111,37.77748797276271,163.18086785438038,-122.40965263055377,37.78292316020982,431.93871525435577,-122.4262727571671,37.77401313505572,160.9150593095313,-122.4227244680586,37.771967044560526,124.9455148672106,-122.4190250430577,37.7788632342804,66.76424627638825,-122.42576472804475,37.7681523387869,244.27977072928212,-122.42673431483836,37.77716830391872,104.7143072900871,-122.4138824549106,37.765427339489946,272.35658351357176,-122.412713504085,37.776782614307045,290.38545131387866,-122.42871246283296,37.7742738631959,393.91052938357103,-122.41849144099577,37.7811580201826,386.7783602943844,-122.42731373825296,37.783795314597654,242.52825678217383,-122.42726576361795,37.78398102054518,97.04950616796091,-122.42789442566696,37.77206325436066,234.26183384994977,-122.42419903919496,37.77530327002224,245.92522825760605,-122.41519296998575,37.77296965732425,279.4504766925246,-122.42258076052714,37.778981595361984,103.03704890589655,-122.42890711190726,37.776698353737096,367.30091598754774,-122.40988796161686,37.7751797897832,333.50321095093545,-122.4268330014677,37.78389041247315,455.4335732174437,-122.42860104053428,37.77408271512477,234.42731514931737,-122.42829796929682,37.76970291237557,194.78166343622505,-122.4231669416669,37.76767654345299,399.5457221075328,-122.41984265290174,37.77437923280526,365.08471668232386,-122.42403713540776,37.76827870126144,137.1651317535659,-122.41744635328952,37.77411557536065,143.48717285548565,-122.42786061633984,37.765686242796825,291.4496019548597,-122.4126232132647,37.78331744801064,280.0830858107156,-122.4273624247172,37.76859042038713,210.9382473150101,-122.41252542414578,37.7722782727914,344.1213286408519,-122.41426706901296,37.779166991717695,299.78717064694297,-122.42825995224896,37.773848247336474,481.7478180835242,-122.41794459446626,37.76530142395555,307.34136021727943,-122.42391574221752,37.7827105456148,83.37159759831383,-122.41456631742015,37.76663840576175,471.50956700021726,-122.42680285973164,37.767451606055914,470.5511326444768,-122.42571797353278,37.77202193451796,261.72728554654725,-122.4137707582249,37.76795718278369,112.63451124109416,-122.41238294485356,37.7683674719059,458.9993481739105,-122.42873152855128,37.78454757233818,397.3124608152055,-122.42469233476204,37.781241441418985,264.1670138142335,-122.41422046336292,37.77603525786028,184.03130676200985,-122.42474241707696,37.77137358472809,376.4354554368367,-122.42321074847108,37.77711240084883,414.2629443269455,-122.42350365523306,37.77555178865104,132.9657071088622,-122.42408628870268,37.7846992046478,315.1452755536792,-122.42602501123204,37.780104557197795,299.75833589238096,-122.42336826260252,37.78349058288496,66.9002313830853,-122.42730679119306,37.78366680913642,355.449192584193,-122.41653142100964,37.78173657553517,227.5830814577144,-122.41297057494448,37.768185315958625,213.8687685970725,-122.41574657695074,37.78244401081626,144.46932425306798,-122.41158052230618,37.77415359571339,124.43040702561156,-122.41556444721716,37.78289149146549,310.82490465272775,-122.42452770416035,37.76723796081417,241.8997125714364,-122.42174333210464,37.78078050378541,340.9407944513297,-122.414157407591,37.767933497594655,71.5395195077482,-122.41465137117146,37.77629779369743,333.8508798972194,-122.41673642650208,37.76711263473911,262.6079512617007,-122.42189357308452,37.76789834854698,52.61169597932349,-122.41635437774364,37.77877896888934,481.56979859213345,-122.4112087114524,37.78306901122667,88.269629587732,-122.42409658517631,37.76796702806232,403.993632234356,-122.41349779434948,37.78234247817888,203.39444281277144,-122.42341153750394,37.77904477268627,208.04765883731963,-122.42763206065706,37.779628884712494,89.85567822128604,-122.42606922973005,37.78459682397925,339.96456522165533,-122.42826748885244,37.77527676114252,309.8037763383666,-122.41254109035089,37.780957068971965,272.31929012108,-122.42217567882048,37.783297112328256,277.8039662408961,-122.4094755101391,37.7693920964588,153.02405126275036,-122.4174917039676,37.773278508990096,484.884183255543,-122.421052341164,37.76516188913177,434.57340323001705,-122.42467050175522,37.77319248247454,434.8915089633223,-122.42614977869404,37.76624152954777,275.4361858364907,-122.41415277572584,37.76871375441328,300.5592729679272,-122.42029210189504,37.780410552333905,477.2918467011433,-122.42054612596064,37.77609280662617,486.28693549580305,-122.4251847380114,37.7723661863256,79.62897402889459,-122.42423399141744,37.76802305194733,186.8495033042766,-122.42531487064127,37.76952149593176,218.5412686029685,-122.4196822878762,37.76847089324109,362.5438883167733,-122.41502601468054,37.779345338637114,434.9686796131809,-122.42448362825957,37.76899968590832,118.79920204159916,-122.41676911242648,37.769057725102925,281.4724609299591,-122.41694091911631,37.78275343422154,235.30191236859855,-122.42127335538072,37.776705898850295,52.57441919388408,-122.42771573977646,37.773622530582706,84.52731736769266,-122.4272103526786,37.78226935951796,372.5589725147168,-122.41504877234702,37.765349386166406,146.63914962128723,-122.4278274657802,37.76768712148146,438.630350413979,-122.4147477460152,37.77034614653039,136.41889710155183,-122.4211774544348,37.770381104413744,330.0419104044189,-122.42256859225937,37.76511991657317,356.0713460414954,-122.4264678339928,37.77691033720867,127.18521220423416,-122.41694906019076,37.77256277056499,436.43806663590135,-122.4213928674632,37.76655597335851,191.7751861933945,-122.41144935346956,37.772013454329304,124.64506609814096,-122.41357378571374,37.77817342330726,225.82284901458087,-122.41035479843276,37.770145280886,251.65791475932176,-122.41649699833398,37.771584877816345,361.6760495412953,-122.42911970964948,37.77480982632412,146.22750027286895,-122.42913437593084,37.78088831757938,347.23958694641874,-122.4157112927786,37.766731641466535,211.7502617820076,-122.41643486091844,37.768602658576775,289.86375266971504,-122.41015323885036,37.778075667334214,476.89527096795416,-122.41332613096245,37.76932418883639,280.70963254796516,-122.41433048789106,37.783404966348314,465.8350123824212,-122.42104031828984,37.77884840534494,366.2522947246887,-122.42414609045996,37.77438428433315,304.9099726908354,-122.41693724292504,37.76564015269431,172.8127221459671,-122.42468634930847,37.77882577551757,475.33539250715296,-122.4175284949117,37.77568982584751,308.49281735141506,-122.41422263731164,37.777217263763646,370.8626910300935,-122.41912964266515,37.78239403345368,60.38846624829658,-122.41954034579084,37.77191423630904,205.86357639882243,-122.4213296001512,37.78237354228373,389.74042991712344,-122.41352089830568,37.77965164603178,90.98798669602316,-122.41041437656487,37.77082616240912,170.4500418962492,-122.42869681499457,37.77345546267472,288.99924014487,-122.42045394487496,37.78062690028831,498.2653589558863,-122.42024470774592,37.774248030225,226.4132906616161,-122.42102134044032,37.78375463548271,478.7617317121279,-122.41456009217748,37.76843056064011,191.53290749409737,-122.42234941517398,37.76605685353127,172.6464415518631,-122.42582960421454,37.76837790498439,96.83418038821114,-122.40987020677704,37.781216662499816,338.72899942148405,-122.4153520255784,37.77650172415676,444.4723752667693,-122.4283595248994,37.78267496159738,385.7369704578019,-122.41366553970532,37.77591714741219,375.1075896525293,-122.42188057556142,37.779368402273775,399.04458589671503,-122.42735335640933,37.76642261718981,123.00330699342362,-122.42007250810993,37.78139361931851,395.1556384913462,-122.42603763804804,37.78247259972711,351.84200977019026,-122.41780457116477,37.7790672595343,60.035767204389614,-122.42875058456616,37.77995433279115,189.4278971874552,-122.42630427930308,37.7814163350113,163.48782264256317,-122.41962098147124,37.781259340482386,290.2804461207203,-122.42834348212182,37.77723853836752,429.4995597013719,-122.41885984750836,37.77569970759432,299.53065006093425,-122.41753007168356,37.78415984007718,375.71124948373546,-122.41334605189328,37.78364456974473,495.5863051632523,-122.41545136765524,37.766247012029375,323.43060914777243,-122.42628296926895,37.78233073612305,169.3313938086453,-122.41533439891916,37.78006526391858,152.21708997662583,-122.41044286865493,37.78030814835616,461.9628444080818,-122.41946969155538,37.773423626044725,113.6969829445205,-122.41333658976734,37.76931539225578,161.934469831032,-122.41343092989898,37.78391727124501,79.53259790108316,-122.41683586805812,37.777670518953286,240.6136220955855,-122.4178287213544,37.78278198407359,408.18795959853554,-122.4125371026994,37.77227052687448,279.5971703352819,-122.4110041485644,37.782272463359114,153.9348566972142,-122.4172656759606,37.77742440643263,397.9868180514689,-122.42012380350651,37.78083074581953,299.19827943249715,-122.41840246157687,37.773506117897995,478.6030684158734,-122.42699036355124,37.77027986808871,172.88665264459323,-122.4193824678822,37.76634893775589,452.7097891540996,-122.42239986263051,37.778799637722535,117.45243289767116,-122.41634543752446,37.76699860356837,185.01371626797348,-122.41286264305651,37.77726311468636,168.11800462241453,-122.41802374527131,37.775254232867695,139.87783360508223,-122.42654428726664,37.77283846552403,314.45107316296713,-122.41177498636635,37.7689030048849,55.039687365066854,-122.41374152771483,37.76553172289651,244.78299805805193,-122.42053745309354,37.78231938247493,73.00923714801374,-122.42216463376154,37.7665022969277,98.67215850583196,-122.41073173745951,37.77777155390393,400.8238891441093,-122.41703794068876,37.769842064680205,321.3089651411085,-122.42553321532776,37.77163791583543,191.18086648009427,-122.42864867540912,37.77600727101875,425.2958429445934,-122.4145049853674,37.77790651372694,304.61809678676065,-122.42445074037532,37.77005365777023,229.3446714644221,-122.42793829817948,37.773409866688965,478.2216031249046,-122.42925284340748,37.78224062992245,226.74241351612363,-122.41003161739,37.78236846476164,110.0248776919668,-122.42810201440923,37.78314726691234,396.1340554981677,-122.4177571039437,37.767531353702545,378.0560395818359,-122.41611975543864,37.78432790188083,469.83314685518576,-122.4286116482976,37.782314998025456,252.55592268585747,-122.41738930463586,37.768170477451704,241.4440374153555,-122.41682992199831,37.7714038012845,266.6459056809225,-122.42763715513216,37.769621009266935,54.93364390919451,-122.42384217748024,37.78147766731765,164.24780493248068,-122.41571581849622,37.76824083815802,116.27321382424702,-122.41162801439124,37.774392617515,315.6140143668625,-122.42844437270637,37.76901682420074,103.83369778223164,-122.42090411637336,37.783632113845904,187.42166688580863,-122.40963258866556,37.771223122099535,366.83855088905096,-122.42626194751708,37.78420237392872,214.27056206425107,-122.4149710168578,37.77399479711268,136.76085619990664,-122.41815710492344,37.765499471797455,278.50288412800444,-122.42402276910042,37.78429824092215,183.3150889925529,-122.41861612411743,37.76844299578895,424.2380180761989,-122.41257807658768,37.77484349528017,128.4254053256123,-122.42557515741848,37.78351897391014,95.3121204967114,-122.42409542954994,37.77277728811308,156.96444213780296,-122.42829280366122,37.76586424077721,64.45389023051652,-122.4162410017759,37.77624032521974,76.36589946956094,-122.41090682780836,37.77825186771128,132.19837198565614,-122.41755013041649,37.7812566843235,321.53791031252746,-122.41957339136177,37.77222923069743,231.22956644013476,-122.41732414485428,37.76965088261749,473.14226895766893,-122.42678731236884,37.7782642559711,296.1626658910015,-122.4253764953542,37.775281635702726,188.75978178453963,-122.41324748260874,37.77287645561794,428.2411459771372,-122.42835334285398,37.781159714774326,68.92015823417512,-122.424741963227,37.765051257499564,332.465186120333,-122.42488670833896,37.76610534780579,358.63452158067133,-122.40942878386828,37.77003553135441,390.4149554781856,-122.41830759017576,37.771126153983126,487.1308318738908,-122.42439282540856,37.76733772186674,433.14741334900145,-122.42563000294408,37.77908092523445,424.7414008037214,-122.42767767778987,37.7745709129344,240.7548883986492,-122.42271790695828,37.78392806684413,131.13055877703826,-122.41513971416276,37.76914089679817,304.165751488782,-122.42459696807956,37.77196842758606,236.33087874819913,-122.42227612113076,37.77337476507298,168.53162538013004,-122.41815778234754,37.776632169263515,174.23381123123465,-122.4152639280758,37.76681429111041,118.21456035604376,-122.41176582060724,37.76953894192232,99.03723318676212,-122.42119392556256,37.76762879505114,348.695031254765,-122.42032082333904,37.77874872302649,262.76200885072615,-122.42395369205636,37.77646773834013,408.6444446415435,-122.4187303958251,37.768737346494376,223.26855702818528,-122.42706504194462,37.77528119581817,404.90889315414086,-122.41200917662282,37.782501581751234,456.6016866637768,-122.41483012132304,37.77828973910397,403.60196767718946,-122.42713537553482,37.77420411224568,298.30067767656294,-122.42596643609912,37.77870009781642,82.11515625022102,-122.42115964522095,37.780023266577906,468.0260310076805,-122.42264002437943,37.76959284163711,221.49919670372728,-122.41427287890512,37.77569914260561,493.7811402239128,-122.42118802605523,37.78000540840994,95.07619680679844,-122.42762453466086,37.765623207610496,211.6370310751317,-122.42104062983972,37.78363915646062,323.90938754726034,-122.41795432370915,37.776911886667214,436.2602248215935,-122.41426421554196,37.7819284991549,209.90286869879617,-122.42248745925929,37.77251246586953,201.51755100389008,-122.4122251006294,37.77099358278196,148.91032038286568,-122.41629128043118,37.77182199453076,123.9084802504195,-122.42907750707256,37.782140289645454,258.73934964298144,-122.41359737252547,37.76839677254521,175.8174667354544,-122.41458233586556,37.766263446187715,200.68562794954153,-122.41797574164497,37.784216443223066,109.36842158921488,-122.413040730113,37.76701329368524,336.2181598093486,-122.42742906297174,37.767940497062575,435.3204440858366,-122.4210978564629,37.784797326343394,231.2391284363489,-122.41395464886324,37.767744987373746,104.48658420865824,-122.42760695537528,37.76614583596261,234.7219015436038,-122.42020734491288,37.77102507241573,369.5652669184265,-122.41813671223092,37.782632084304815,368.8606062792496,-122.42597828066285,37.78145075791134,195.04999031021313,-122.4095087148663,37.774526883032706,124.09460971521332,-122.42365194932307,37.775606202629056,290.00215170165745,-122.4204083329416,37.780930742237665,278.5523942890749,-122.4237908987048,37.7739875466912,362.4236358961383,-122.41128486418728,37.771393518537806,335.3227287380237,-122.42714318910966,37.77408893536812,53.757381881196345,-122.42365484610244,37.77120813791496,187.7027473440245,-122.42229969467728,37.76566852697925,183.23694011095264,-122.41190505853022,37.78280235481413,441.8646911490281,-122.41288223547146,37.76790338001634,418.1954006167084,-122.42368840767524,37.76659584032092,442.41338067929,-122.4282580184311,37.78403002796599,129.71095465685113,-122.41340616275994,37.780393070623624,101.6538253972756,-122.41392009825412,37.77810605439403,484.4685456535703,-122.42678237722892,37.784257200696906,281.99614733381395,-122.41975549539325,37.76901374524391,464.95909648823465,-122.41317790867387,37.775506042664986,180.71672252402465,-122.41076911185786,37.78449940658718,254.32489517429713,-122.42626941573168,37.77802957214664,95.02910220494,-122.41110501342544,37.77234334047675,55.530797520051905,-122.42552752380408,37.769713854236656,78.36514362489271,-122.424864827652,37.77061813578479,179.57198667713678,-122.42285986463008,37.76994482040347,104.00123732759964,-122.42796186565369,37.780428948929995,459.7756283176724,-122.42333271435572,37.783647761329945,108.58750694166504,-122.41933854799456,37.78125570659714,494.1111713981955,-122.42070643703369,37.77574474410984,471.5482772853508,-122.41405533211682,37.778677706041,270.77435974028276,-122.41076537150492,37.7741311494884,99.99374398069573,-122.4201883489861,37.76688356199175,353.6032964104228,-122.41147527501708,37.7795614259206,183.11601323811183,-122.42480567432634,37.77598453028264,79.27068098171327,-122.42835305643138,37.768949611203304,390.3493039160715,-122.42107858659182,37.77101208430981,466.9507018138271,-122.42594485363438,37.779341418764055,495.1328739647432,-122.41071178410856,37.77881236292994,420.3627389580941,-122.42860884986874,37.766759812796465,441.9013057105128,-122.42298873551276,37.77649967574857,360.42857754618393,-122.41989658267954,37.78099977999362,133.52182877994494,-122.41316064515216,37.76607101858488,90.87718147763638,-122.41413410176006,37.77524538112883,421.8159781994311,-122.41434545724348,37.766672008593595,497.0177546720787,-122.42220350198728,37.78356226662687,430.85695093989045,-122.41877320093526,37.76726672381847,485.5154616461854,-122.42687071509192,37.77665538721725,253.8566376710848,-122.42542140440408,37.76538383527783,92.74399023979046,-122.42067906051764,37.78371358490231,437.2720206573693,-122.42551742459108,37.76862202835693,113.8229729094537,-122.4233358361248,37.766512030275145,315.172292556689,-122.41046194201078,37.780210257979824,95.1981880378847,-122.4178052577012,37.778039103125344,52.090017388244945,-122.42862401090542,37.77013411367472,344.4378446903252,-122.42186378744452,37.78008796524836,467.58607780417015,-122.424390341065,37.765572272003666,481.92547162949455,-122.41208709927254,37.77312191205202,330.93068035247137,-122.4183861891061,37.78416788868427,230.09859299246503,-122.41953316823894,37.77010315581924,77.2011153433716,-122.41606582289208,37.7688619526552,276.07933752959104,-122.41267762768908,37.771890127441736,294.5947615922489,-122.41372056298988,37.781912321156824,330.57851448029993,-122.42173882387158,37.77935628606417,92.99129343630672,-122.41183495064534,37.77406601283057,174.9938222647648,-122.42700506423,37.778280446746585,279.4433253378813,-122.41053379776253,37.76614546211764,478.535623070498,-122.41738085610004,37.78062556398768,242.75425749573225,-122.42209904866614,37.78003503011377,258.70126881241526,-122.42574749739494,37.78231156850092,443.8980871870586,-122.42268781511518,37.76544334842451,311.4112542108253,-122.42903283232002,37.77485625016069,180.0114421117153,-122.42758129100172,37.78041223701851,172.8629580541367,-122.41755034012196,37.78075708838068,133.92995562682688,-122.42921668899632,37.78320180136814,233.08884839268492,-122.42806017811208,37.771235233541354,431.4041583253226,-122.41499333261667,37.767714230560976,99.9735999701492,-122.4112383262588,37.76794208566445,84.4789162683419,-122.41125073647306,37.780972070708835,207.04772088585992,-122.41976010164534,37.778258399976075,465.414749472586,-122.42374665278918,37.76814466811565,326.0256926286222,-122.41462921921048,37.78270516106035,206.4522836610101,-122.41048447005508,37.78128127027723,320.6154321455299,-122.4150008092126,37.78133273795421,341.8239188962419,-122.41400052763586,37.77160416094742,243.297105584304,-122.41294479513935,37.76969748225512,182.5088444785221,-122.41480221764591,37.77792295169763,219.5688227665869,-122.42836067803738,37.78448209876031,326.31403930189276,-122.41973971774313,37.778626543933726,214.27307489381243,-122.41987886595696,37.78164082250486,356.51196458257573,-122.42472750472704,37.77100621353394,175.0649048462116,-122.4109555336369,37.783666096368975,371.3546873310375,-122.41820218936309,37.770105737151326,316.9719918445965,-122.41856479360118,37.773841110876134,252.35593289832076,-122.42201964535175,37.78443600657022,191.97014291700071,-122.4257284074529,37.78326153104398,55.66667570037265,-122.42027366358896,37.77997923807194,327.59860246736724,-122.41716688648708,37.77099502190772,249.29172774765073,-122.4104784876386,37.77897371954922,83.87250845162174,-122.40995893050751,37.77427535930929,268.4731510246427,-122.42921379418476,37.77976386397464,326.72038006271634,-122.41993130132812,37.77676443140215,485.8762169056683,-122.4130114429266,37.780791565574006,96.27476722887084,-122.42845877604246,37.775328913780875,101.04234203562868,-122.41233208532924,37.76677714569647,350.5371000078562,-122.41835323973088,37.77633544704097,318.11338957548634,-122.4242741524926,37.78037759311461,491.7772478217466,-122.4278150078774,37.77752615106184,217.13761039695444,-122.42298575670031,37.76698449605617,465.81552159361456,-122.41189982600513,37.77691302133097,225.8376564690919,-122.41799374984346,37.76998783161684,269.51606681341957,-122.41931859840504,37.77043628615583,394.3001796979325,-122.41495252984734,37.77711560142152,242.35273995911848,-122.4098346907294,37.765053280652985,451.05324846416033,-122.4268192718222,37.7809517135916,474.900653513204,-122.41112545011988,37.77284030082475,173.2957702126655,-122.41006268899412,37.77504823877436,326.51645369134206,-122.40961300971917,37.767529782397965,146.99447829704542,-122.42448000519386,37.78305222005113,244.26634039538857,-122.42552421739953,37.784001210229704,405.5333571334736,-122.42509512358998,37.77005214440668,325.83980371521216,-122.42471884449964,37.7725767776609,97.50903899875853,-122.41051917443438,37.77992356095617,346.8791895173407,-122.42404451370793,37.77827145293446,415.4149818616973,-122.42281357445034,37.77762192092819,345.2673715264244,-122.41419070787448,37.76731116832808,145.20776292018604,-122.41531012727177,37.76513413221462,398.6724949945796,-122.42193585261788,37.76577478144618,118.69384100027315,-122.4159162610234,37.77794583297184,72.56481038231459,-122.4278260464961,37.77040762348511,387.917777082525,-122.42078033874306,37.78134844747337,190.8255278067613,-122.42289163438636,37.77654397493188,142.53326398952655,-122.41640272156594,37.77239105774041,357.2347278321685,-122.42816784029417,37.77181754921476,212.05297197005171,-122.4280879847011,37.77171208333163,384.6815667286005,-122.4250637144814,37.77701558498906,82.2697343982197,-122.42091629888507,37.77866548471561,344.7174806474612,-122.41853188295605,37.78418034814236,95.50633468174622,-122.42547531436624,37.76810049872927,490.0531945037569,-122.42204582983744,37.78290166366033,424.5016012269704,-122.4236755138552,37.77695885752959,493.68737477765467,-122.41146506900184,37.772689637898054,479.7003695041661,-122.41661474233636,37.77597422970716,424.7820687161492,-122.41524104346595,37.77094666498703,52.739388939015505,-122.4186717923384,37.77030495384262,444.5863623617773,-122.40942190600474,37.76768393402692,117.35305906262047,-122.419810900437,37.784776967777994,127.49824499316472,-122.42172930975131,37.768926242156454,160.16403263546002,-122.41304191646334,37.76945499472207,367.47619729841176,-122.41945665438564,37.78229938319296,207.25143835263276,-122.422540669606,37.77041535136503,423.5625060244941,-122.41582679812346,37.78451974756326,145.18788163853617,-122.4272128819378,37.77061567111052,411.9784011118408,-122.42783323564475,37.77474650960003,496.47727150178423,-122.41854243735278,37.78145037844213,413.0216456201274,-122.41047242693284,37.76708528420619,492.1171929774981,-122.4126614433431,37.76614915187238,194.6085376168514,-122.41298847121332,37.783427652134606,244.68911627181615,-122.42201234704834,37.77875064863075,74.54284730381781,-122.4171463131065,37.77047519744829,316.25096926707675,-122.42770702492832,37.77843642597715,136.3493973731429,-122.41537413315822,37.78158289194002,311.07936640844025,-122.4255625363119,37.7780708103134,85.40764562385402,-122.428466303602,37.774652556193345,95.39996094763652,-122.41048652925896,37.77187641067939,268.89162576173226,-122.42040802187984,37.78400230414584,288.95140838433315,-122.41468958588412,37.78079031088982,400.3706114152504,-122.41151800927788,37.77080580988096,400.596884302391,-122.4220566074861,37.77300205389055,485.293627503766,-122.42602801903132,37.77770952084352,205.2001283779325,-122.4159644145949,37.76735841356931,410.8641765151922,-122.41589740228312,37.77739567725579,168.60782791337044,-122.42555967498063,37.78135069588769,446.6600441958002,-122.4095955493077,37.780406923008066,64.15573786071174,-122.41603961094974,37.77749115393784,174.81911599998563,-122.41599492047912,37.775122582784746,253.02380165941815,-122.42313635898591,37.78168676984712,171.50224840925628,-122.42043184317968,37.76693784776132,342.1592297770868,-122.41217933200056,37.78067864943552,380.93631147815137,-122.41638786953496,37.78418156832981,158.14529633517378,-122.41962790148244,37.777554237574975,270.5536562570519,-122.42852306295006,37.778227708271565,146.89873738792917,-122.42039951520944,37.77086104417279,231.81347764780696,-122.4156171328604,37.77210100931802,234.96835125857515,-122.42795541303455,37.76907765448011,227.57222824755823,-122.4143337413624,37.77323008863808,155.1105874048398,-122.42863276890424,37.77434563608326,169.8027288428607,-122.42385146530398,37.77080602955144,205.96009454410063,-122.41400455385228,37.77779665208045,82.31339545046114,-122.41784245837118,37.77064819192931,388.9398658614032,-122.41064899325184,37.77025185353456,377.9699810417355,-122.41403821243162,37.76528655261835,464.6289146000883,-122.42795285484516,37.77551875356824,316.18795880991786,-122.41583754996928,37.77528064560259,326.7830030083298,-122.4094663344413,37.77532592095309,269.70850824504373,-122.42877886247928,37.7810431107473,444.6622720677367,-122.42873146933812,37.78036283747838,121.20766820339608,-122.41031736716856,37.770896010551304,100.71403719724634,-122.4183188323308,37.7828712120935,302.1215340186378,-122.42660558866042,37.77095831457667,466.78501464775246,-122.41885087072556,37.77984888813194,148.0096018023897,-122.4167230036253,37.78060379086297,260.62738825795896,-122.41732489712324,37.77221361496523,349.89197636701084,-122.41741138915944,37.78052643711495,161.84120090577636,-122.426234338986,37.77266331412254,62.72821773094088,-122.41443249501144,37.77071009011343,426.65350811140274,-122.41712308109985,37.76784606088558,117.83164686402576,-122.41690598661188,37.78405868242114,295.5663572148268,-122.41932222406416,37.76642478435947,372.9665127692016,-122.42888515180503,37.77355632004419,238.7254270857752,-122.4202899660956,37.7658995805732,356.02746273807645,-122.41961567502624,37.769739542606345,409.5546671085614,-122.41842134951,37.779134456114924,181.72599702789736,-122.42938566282588,37.77677121870758,478.5893126390553,-122.42864359726896,37.78075190232577,301.4255336956486,-122.4272601747765,37.78444615815983,421.2261182572509,-122.42493819963109,37.76984680631639,179.30914778389854,-122.41908108242949,37.780332538219575,95.51797606329288,-122.42231152016024,37.78342388136864,116.08167608304176,-122.41226540106987,37.78186084179203,138.0643426863678,-122.42539061904466,37.77451780293206,208.61394871806473,-122.42028678356894,37.783290620493126,345.47987726290813,-122.41803361697843,37.77274916372459,434.300370573366,-122.41710917963556,37.772042423186015,175.321401510824,-122.42333560906562,37.77803262147416,151.27625548160245,-122.42097762191132,37.7750191581547,143.54975934724868,-122.42829335225672,37.78223540709012,200.4108683707091,-122.40993710577146,37.776501776693394,400.5448276548239,-122.4126158409392,37.782781886050664,370.7231013313473,-122.41852808850176,37.77442671466603,245.75536734686384,-122.428319047453,37.77153129398135,389.8143725522637,-122.41294704145612,37.78371569041006,87.77824767490273,-122.42639009003854,37.77154382066232,346.96593286657696,-122.41242464829438,37.782417661670344,98.11652110126016,-122.4178595919662,37.76745733602445,448.8330851381299,-122.40955815625942,37.76599268840002,318.3039859290575,-122.4117869884507,37.76950833324235,298.73635141851656,-122.42450400253996,37.77816094383607,274.92001598686505,-122.41644325922783,37.77140590268046,441.900756512,-122.42418667234875,37.78293880393498,211.26543454957925,-122.41296397081491,37.77671275667989,253.4459925939414,-122.4269622157584,37.768246426080026,372.9750146345711,-122.42212971085262,37.77020652275111,177.18152267817192,-122.42658262792098,37.766950319281335,189.50983079724608,-122.41039577588268,37.781450126397466,249.9720630354792,-122.4188038188586,37.77879190854507,368.0124711541315,-122.41182237708172,37.76880481205913,51.57709858897622,-122.42878058793154,37.77892339723181,156.716632956426,-122.40974695177012,37.7725103541974,276.471701645263,-122.42632501375792,37.765403868279186,368.87918019580894,-122.42539320357808,37.77365322656296,132.68251662909256,-122.41375996348812,37.78424070550513,458.6594254522838,-122.4163044849743,37.76848511223816,458.91174483630766,-122.4239368075926,37.78220591517818,473.10538679280023,-122.41499464152103,37.77835405988418,488.44293674198633,-122.42212548957728,37.78155660753577,360.1207542760287,-122.41261183924782,37.77587717330155,304.49251157884703,-122.41395519448211,37.77158099931338,337.432665330157,-122.41944261638972,37.77061516649186,311.9546168689262,-122.4212783573488,37.77237842094026,51.57988290979278,-122.42233045049744,37.76887984277919,187.22058696394737,-122.42742062753182,37.77042638216932,353.27500208286057,-122.40980531330452,37.76848729364025,242.46180910229208,-122.4273849431208,37.77899108856055,340.12257701663435,-122.42685376242508,37.76900665877414,467.43723463556626,-122.42144730028534,37.784270746634,314.0396585111246,-122.41676450312694,37.77084581580615,408.44684932092434,-122.42910287754984,37.77024804055715,320.6192951494222,-122.42068821683974,37.779032597397574,231.67985184721857,-122.4244008203752,37.782221912672235,331.42893344618574,-122.42312435713389,37.7796307045667,172.81477738973155,-122.4161854521378,37.77850223770894,51.84565269357518,-122.41214649674107,37.77390508492286,136.65924380607817,-122.41129356343248,37.7783492099605,498.9426522689631,-122.41307544296274,37.76675250966103,142.16956118413452,-122.41731238561836,37.773588066380135,335.7281820924418,-122.41940763176002,37.77765376493792,150.35568863534513,-122.42379073551592,37.78244940093309,284.9331070117999,-122.42360025214712,37.77031612656074,344.6741112773016,-122.4293951413113,37.77703463449435,60.0560547920858,-122.41383256190908,37.781001806369915,350.7167467436785,-122.42812928555152,37.777235672157055,497.7737386156613,-122.42699458073744,37.77232225876861,478.87096377193023,-122.42895594374023,37.77226897839834,377.03325435319385,-122.41871559180136,37.77750494438912,168.26642354882375,-122.42577499488895,37.77788644649154,78.04297627213354,-122.41014430384038,37.77377838909013,291.9418087944556,-122.42213621752568,37.774721914587666,73.07164960841897,-122.41307932995396,37.778003474290486,289.45393709211794,-122.42363695728444,37.76861293409803,380.398252787991,-122.42926423651951,37.76710863726822,91.94626665171432,-122.4264146397466,37.775611076297594,432.111486272505,-122.4119321708418,37.771055916633614,426.9032306043457,-122.42306631287966,37.77501268306844,432.489095199318,-122.42557421686608,37.775967423794995,52.15992116781683,-122.42429825555156,37.781658167497035,462.4107568997254,-122.42591979103968,37.7681073081224,353.8147344997318,-122.41926900000182,37.76725102600301,258.14072448306774,-122.41197446023756,37.775198666998264,242.10593929527673,-122.41837365218674,37.782717110699664,155.33429179285184,-122.42534012881616,37.7752844914156,70.98615520771567,-122.4184395700554,37.76958406741853,469.6231435311829,-122.4151965346682,37.77321550207047,155.71813686311447,-122.41601175871492,37.76833387815411,353.40645273268956,-122.41097084527568,37.77555008132832,377.97536620503655,-122.41220291019329,37.76775683929629,169.58586928399762,-122.42768800894352,37.76898632766798,386.0467000787431,-122.42912101962617,37.76628091812629,481.4139836144293,-122.42255049561626,37.76996544767046,125.551711312256,-122.41455597981758,37.78132776725801,192.6831962133762,-122.42268885596606,37.773925882260585,397.1974708795177,-122.41245406508928,37.7664139945462,480.5997991848348,-122.41001121248648,37.76623947224051,289.63169139043407,-122.41257120480088,37.76623129455829,148.97044122376155,-122.41363449583658,37.77356944465512,282.5602676107808,-122.4253772691482,37.77191041068573,335.204788795251,-122.41986492248984,37.77935475504478,187.591769214577,-122.42342655685223,37.778133685768,96.48521501597595,-122.42678137495746,37.77586838325987,356.69075009381186,-122.41289383195154,37.77993493984792,72.75900473555467,-122.41451263591392,37.77730947570104,132.21266572012223,-122.42015086365868,37.779899555969045,384.739376399677,-122.41296844616478,37.7826825584788,424.78511387806446,-122.4143402761392,37.77922794223917,246.33021168216243,-122.41279934632745,37.76919825274073,455.5351048795707,-122.423054895671,37.76643943338762,376.0841016047271,-122.41314613913248,37.78082482901083,165.83505358851744,-122.41412779040772,37.77762748563067,329.51003308174916,-122.42627337123214,37.76927431225996,433.7284843753464,-122.42163733837997,37.780460504862894,305.22404583314176,-122.41910144982278,37.77226694427589,87.71379506922392,-122.41956971548336,37.782483715452024,188.8734567359465,-122.4172796999504,37.77136054691508,78.72171561937111,-122.41531791278456,37.78482315346998,129.4761616583553,-122.41941927654192,37.76624511827935,494.63057388251747,-122.4252142447694,37.78103330106054,205.1932026619444,-122.42043029543994,37.77312383035989,104.70048328322108,-122.42844084535126,37.776223613824506,256.74743597827035,-122.41796342457634,37.78018706772873,470.062756376401,-122.42321463777,37.777290524000726,408.6102045841834,-122.42541835374344,37.77651900759776,98.55757275033926,-122.42446505158664,37.77268460943384,481.9676542625757,-122.42399883067796,37.771738105562115,220.17731650381907,-122.41561781837028,37.77789017859415,449.7384863469674,-122.41592966426366,37.773995286851054,403.0295610548989,-122.42656777298764,37.76824714064474,424.7793917900768,-122.41015628181016,37.77040576426904,488.994437175779,-122.42434673995658,37.77900278291141,311.505079968075,-122.42499741511604,37.76528289735994,119.95353147040578,-122.41530177734536,37.780956218696495,62.046763566407535,-122.42933958257288,37.76797382085689,362.60240163988976,-122.41408473357905,37.77675680361016,496.1784597253259,-122.41319393401751,37.766591307561946,435.2428995063727,-122.40984013152524,37.76912463662946,219.1477796580532,-122.42091014334646,37.770630390978546,151.6940445476716,-122.41473344182566,37.777352610671976,468.4931524103606,-122.42568948049484,37.771605581001566,272.7284601672462,-122.4243559519568,37.78365930462868,297.35135105166097,-122.42035353044731,37.76948731554076,235.1058119966752,-122.42894991345142,37.76784551127104,437.61322353045506,-122.41120889143126,37.77046736963325,461.8633478138413,-122.42292208894838,37.76749357956449,163.29172394545162,-122.41768295755134,37.76911013879331,261.0564937487545,-122.41912733232142,37.767998506222874,355.3426598964691,-122.41110831129556,37.78097609780967,206.16261139653625,-122.41580896326856,37.77737996971058,229.8373171222711,-122.42598939221212,37.77102926936086,78.74410273784979,-122.41855933309805,37.77940012152599,243.07159728745205,-122.42153659130872,37.771177509934454,115.35479108435472,-122.4280027615863,37.77232934525249,401.32309806793506,-122.42400052726288,37.774563617266274,119.18526439810368,-122.41999351904126,37.771464662113566,59.624981003785905,-122.4124528989218,37.78392889651327,155.76295420316018,-122.41854317251332,37.777794904971536,234.90495724631293,-122.42103273923142,37.76772447086746,134.01454319472774,-122.4212395981743,37.76855675559738,116.57963244828682,-122.42103736800412,37.77632520939874,300.80527912241007,-122.41039240497037,37.76664034436606,386.02472075782794,-122.40947974433234,37.77835529228825,267.3290134474995,-122.41731022035482,37.770164946930365,233.57091697443337,-122.41591560735104,37.77990531527878,131.6692061864144,-122.41322044500772,37.7746226097043,431.565873025285,-122.41285683703144,37.76966293307331,280.73141162835134,-122.42041703594536,37.7679898440801,325.7846482835137,-122.42546092739582,37.780288977881646,252.26688433344265,-122.42042176554814,37.76898896744929,487.42203414907146,-122.42072552594335,37.77509708019101,397.7620217877833,-122.4182231825809,37.77366357226497,444.3584508622362,-122.41045658766312,37.76964957113505,123.81797618438586,-122.42288993323749,37.77052099500334,301.33226892237127,-122.42921516823188,37.77991539298422,473.5487879355458,-122.41769028123367,37.776215631096825,130.70901166904832,-122.4208396129512,37.78143717121946,270.71528324363027,-122.41728481021282,37.76550207744423,88.54888732113781,-122.41084198740276,37.777129272224514,475.7009870025715,-122.4193115792057,37.782597102353925,99.50955934616448,-122.41328059742658,37.76510568991872,235.84642708679945,-122.41249548883678,37.77113758871528,145.18423298490234,-122.42313498519022,37.77176773404356,259.0423085859886,-122.4149115531946,37.78347261124231,479.3691772036301,-122.42587821424112,37.76790944542012,203.1013586850764,-122.40975845242728,37.7743192050487,133.68345082615932,-122.41741272896525,37.78298719549988,172.51139136671208,-122.41930521049238,37.76914894554391,193.4833140214621,-122.41720583608928,37.78281125696264,85.45193195176145,-122.41230765073696,37.76871219666149,308.64006079493197,-122.4290077893505,37.767297821869455,56.146026391735994,-122.41331781507876,37.77089884139554,270.5501644864049,-122.42430558999084,37.77583391364144,305.69375335437087,-122.42687259716104,37.78353109828619,471.9569459717616,-122.42653837209166,37.77289037569174,497.98410271897046,-122.41996487381218,37.766989090362,150.1384021244986,-122.41148375797202,37.76919391774927,162.86185962540338,-122.42132902758372,37.778074352774546,433.46280373451407,-122.41412769402076,37.77082715227027,452.6004309413061,-122.41257286457387,37.784294472655965,107.24185370200138,-122.4253385881416,37.77874022511894,412.59372464435313,-122.41521371410391,37.77645263508689,164.41358117654474,-122.42772252522896,37.7719163821867,128.98015360947326,-122.42336330678214,37.76659376683751,158.69426572219004,-122.42253911988414,37.77251982547337,229.39667938328543,-122.42856239212324,37.770965717816985,331.0513861628275,-122.4179300083013,37.77553144305374,107.6607681127358,-122.41475090741731,37.77802819207002,108.9565494951265,-122.41099772373354,37.773253339916344,112.89724749207252,-122.42691309365117,37.76643606096629,441.25660244204937,-122.41928515403288,37.781193420094205,189.35625395815512,-122.41549540688504,37.77199795366973,351.3753535240178,-122.41105802989657,37.772805186308624,402.09873584008704,-122.42714991733524,37.77328365751804,79.97993931535765,-122.41769756678146,37.77494854574333,268.5237430985811,-122.41560596930276,37.78358608228335,463.54069647517935,-122.42395065631932,37.77994795764608,393.9796411531584,-122.42659910375733,37.78138943035209,363.4425600745518,-122.42209832653432,37.773526034126824,164.6968803850326,-122.41686432365896,37.77458041145019,219.64695591498568,-122.41475418865149,37.76568538828484,431.9313474892855,-122.41974211126802,37.77280310594945,385.9550032115268,-122.41885858122971,37.78383512489385,127.9064476243201,-122.41751336532148,37.76541539197529,133.22540174527938,-122.42152561660694,37.78367059566946,211.13838585202015,-122.41652895754024,37.77582917083456,132.5589142859818,-122.42015277105504,37.78004565956551,117.82958328341164,-122.4121212838508,37.765231849612654,462.93493591476954,-122.42390910830518,37.76537415507289,498.96329839754605,-122.42294632585843,37.78226819047894,368.2718266750048,-122.42410805776238,37.77637899732138,173.02276315120037,-122.41616951351708,37.78064743916299,375.2272751200822,-122.42707108951832,37.784376008267145,141.92039895508395,-122.41831354803833,37.782984865828155,137.8701208359743,-122.41430254942182,37.78154727079322,100.94929247005216,-122.41546985633046,37.78350796840339,220.58902537198347,-122.42435636036362,37.7665704982936,84.86928056108728,-122.41910141009214,37.7737421406936,240.95216290832408,-122.41112843977194,37.77633991756567,82.92879444560094,-122.42258848125158,37.7702634873549,462.3218768045891,-122.42366678837426,37.76559345408453,423.9879833104678,-122.42791506281338,37.77009656275881,143.93414004277545,-122.42394884502367,37.773126079441326,418.7471368069707,-122.4217608396191,37.78138700894499,206.64299637854333,-122.42243538720584,37.778325416504586,238.547158389604,-122.41500883173468,37.784668419879274,395.76424671167024,-122.42649427980508,37.78222203090756,61.692032176601145,-122.42879959548564,37.77344972908181,202.0342485628867,-122.41301785347645,37.783588660775074,344.04436587846294,-122.41038812068138,37.76522400794679,431.2442694080248,-122.41095002207396,37.770781349243535,396.7202113255833,-122.42011336510409,37.766956851843155,446.1310683560436,-122.41166820807662,37.771386587547035,295.50845603545037,-122.4145844026568,37.77640718346258,334.5804028108384,-122.4226406004152,37.77874708612309,134.23037404482062,-122.42663535826428,37.76609886601723,254.7207823088501,-122.4207405390032,37.779583025180834,480.4702554952884,-122.41195787872506,37.77420673867879,373.62736527895635,-122.41787188897092,37.77752750652097,364.7204895799495,-122.42357412505588,37.778176489497056,183.5178301264548,-122.41053403205508,37.776178391335115,423.250987892749,-122.4198868993815,37.771719171428714,195.56030062872347,-122.4116173892859,37.770767068428825,348.1235929329253,-122.41016475043308,37.778427221357454,378.1559792607624,-122.42450767451896,37.77033909118797,62.96061675620008,-122.41835555439653,37.765224868864195,188.9797141141066,-122.4213017837146,37.77175461850856,207.24130071220463,-122.42117905612888,37.77789576093529,336.3566563701754,-122.41853060260036,37.76726437244582,337.72589865635075,-122.42687728427408,37.76515794939579,424.62026348875185,-122.4112203821617,37.7751892265548,98.25611079628558,-122.41299077419684,37.77267452695753,262.7181043863301,-122.42398181553506,37.76843793901648,398.3771750103181,-122.425402540507,37.78481137800981,444.33348822116824,-122.42081354468591,37.77295407441989,92.40007043637831,-122.41498213561896,37.77754792512931,245.02138165172337,-122.4113203660682,37.77996944221319,239.02820131075117,-122.42753425230556,37.76863279879595,81.31633132833903,-122.410487406445,37.78189918661007,260.70188184168455,-122.42787830546467,37.77446982140214,339.2227196355011,-122.41122164511756,37.76700966854922,73.19969296981309,-122.42281166685252,37.78130135004112,103.59502592421002,-122.42753939250518,37.77105541810587,365.6740552546026,-122.41085267181076,37.77950443435515,292.74545996957124,-122.41988115564904,37.778934765477544,95.70047154313048,-122.42205652371138,37.771215463024994,489.1520020531544,-122.4227052934684,37.77841325804415,412.7943448275949,-122.41110227699755,37.78359459830977,93.91062630932126,-122.42855331014962,37.772456784274546,93.76439713498958,-122.42285557633676,37.778062044361135,462.1964006129349,-122.42032492479498,37.76720292356791,244.22698281755711,-122.42850497132147,37.773740668418625,144.2427737625201,-122.42320469371714,37.77787530772319,275.06663742397967,-122.4226766932284,37.77653473294843,141.74891395723574,-122.42104060912828,37.76815321630211,451.9429648478789,-122.41475398458785,37.776804594654394,360.2024699900373,-122.41915953221782,37.775705577863754,395.61460441433707,-122.41135508753808,37.770826516038,390.14336803027425,-122.42409753477108,37.766512308103394,119.93050793255696,-122.426620801895,37.76650373513625,344.1043187064959,-122.42410267484372,37.77044138499427,151.94923183683107,-122.42740136245892,37.76844307046446,373.6708276768767,-122.42520678155776,37.77651290451819,116.75263132387089,-122.41055398124196,37.78391065641909,449.11957834272744,-122.41548644673568,37.77050669505103,112.13764547090408,-122.42517474166124,37.76599130816566,482.71053696751216,-122.4159199725786,37.77375154691866,196.0603966243756,-122.40943157532152,37.77196205777877,70.2092734289292,-122.42715234050142,37.78058810946426,108.09335743683502,-122.41363762120108,37.77700179037081,242.65762281956376,-122.41899834633568,37.766091741947065,478.4262882337448,-122.41929671963412,37.778230439533864,258.2737957394635,-122.41378429033269,37.76894587898317,443.6968853489649,-122.42446623140512,37.77456588569933,421.26750978051274,-122.4291625730666,37.76614082833913,471.04480823429503,-122.4118680376233,37.776057473513205,426.4340875014105,-122.41041775086224,37.76860553700667,53.84964655317658,-122.42923783606228,37.78174330753301,287.010211516858,-122.4156614516645,37.76736567558598,67.16912267091973,-122.42125652522802,37.77858628497851,63.0674521968985,-122.4262524297026,37.76643516123778,299.561302191031,-122.4279825659869,37.77469288152064,332.72575657934607,-122.41091291307612,37.76686848378203,477.9908058051843,-122.4138562818112,37.772762942589885,396.2206159084277,-122.41294223863412,37.77845091610368,498.13539313017304,-122.4234730384624,37.77051201626476,209.0967001535548,-122.4259763051233,37.78238614668275,195.15165648497077,-122.42850859918576,37.784464413370536,230.0672992576303,-122.42042914901263,37.773300220085915,449.0268724152451,-122.4242749015222,37.766092346506895,217.20789883229003,-122.4157260090855,37.772954789694936,486.05583357635,-122.41030724695986,37.77282001932772,203.20281299462255,-122.4200992935054,37.783040839208304,450.0933092223078,-122.4130963953606,37.774576050797215,285.832600928017,-122.42715517856016,37.76812915668129,86.23245136618033,-122.4169249323126,37.77974542784505,232.3516023182003,-122.41937298012732,37.77012324865022,441.5215984728763,-122.42011455261353,37.77710215844073,225.8161478096492,-122.41906671480312,37.77688598574013,386.8515435518045,-122.42012648388452,37.77061251977125,260.7842952609614,-122.4185093741419,37.76838818534223,470.3699047068529,-122.42561965434508,37.77304731048426,126.5480969054342,-122.42295323083836,37.78213329769398,403.532061929599,-122.42018630053036,37.77349346726711,206.48290203316657,-122.4278345103854,37.77027595230061,285.6624495101097,-122.42058289774594,37.77665983258928,118.02288118470194,-122.42566534011804,37.76833658920715,198.0782676054093,-122.42725277763098,37.78113732248021,209.13703841304965,-122.42708649552704,37.78355505878121,188.48728247351912,-122.41286544703208,37.77619181277867,233.19138027110887,-122.41274441857954,37.77930314921862,374.66468723030766,-122.42259450035532,37.78284771434927,117.0903869457115,-122.42135687236312,37.77490116518383,132.730577100184,-122.42265524498328,37.771151960498166,200.87974268576176,-122.42391476299682,37.78359087761432,266.8749257267243,-122.41331594185404,37.78421277950534,209.7238840201588,-122.41919574167044,37.77640121146918,380.2387927972919,-122.42189002755958,37.77780437151689,425.7634825700811,-122.429016541785,37.76887263227724,120.16681347822416,-122.41392127742353,37.78283990578729,433.81596118030234,-122.41540573845693,37.77168481322348,225.8750971702498,-122.41219504378044,37.771238852435346,448.35304289502767,-122.42055687723774,37.7820446187474,450.14630604088586,-122.42279411649064,37.77855080957534,282.25606289111903,-122.42623518516368,37.767299058834624,445.6726885323092,-122.42542166372525,37.783947735047974,133.04077283148985,-122.41972813903791,37.78381499404452,289.50568145451405,-122.41595474120136,37.77973955459028,200.41851865064413,-122.42365339333544,37.76597269583042,148.29721024490618,-122.41814622488418,37.76826557177016,426.25076221745945,-122.41819517072432,37.77512227276979,428.7538441721699,-122.41450792641992,37.77908777643649,292.3141894982177,-122.42029363179876,37.77215965680808,274.34519524908194,-122.41780064359594,37.782627607239206,66.51859226208278,-122.41923376611446,37.77031118512976,286.1183935320196,-122.42038835014368,37.77276243596415,125.646147412331,-122.41005573586384,37.77228272387619,423.2300990895211,-122.41835963655409,37.78249829253454,186.1267821581352,-122.41378534539942,37.76989945781738,497.52729689925144,-122.42594781774196,37.77334384467762,277.7024006451219,-122.42563917814822,37.77327939547559,233.89595699442623,-122.41942297952512,37.771317090855,110.433633977834,-122.41399821937492,37.77180033679849,326.0717473333908,-122.4100764395033,37.76490454076437,433.62978633014234,-122.42663242874916,37.7673072715242,486.1985564082472,-122.41730774572989,37.76728281343993,58.309657201956185,-122.42921310093028,37.77927436226525,450.9727776187406,-122.41564074319764,37.76597661049817,245.1771781907073,-122.42249640323408,37.77172488899516,159.86156936310786,-122.42401019899732,37.78222071350092,397.35146584636453,-122.41089470716686,37.774564641517514,306.78988214527016,-122.4251088695734,37.78474271278957,208.919481027142,-122.4140794820096,37.76503964523761,436.74016588758695,-122.42010300392592,37.78145047387907,382.3517741521078,-122.42209511596768,37.76626373239531,453.12560451057294,-122.41403200142102,37.772437337606945,398.68243094034455,-122.42434290042476,37.76703601408005,255.02114187574796,-122.41793701504037,37.77130802572281,426.6224801644803,-122.41370234033224,37.76737692053412,484.45618029791154,-122.41360652772414,37.77579261742215,300.96714285800203,-122.42713788486996,37.76827620011569,164.6565600790869,-122.41546408972071,37.78359591034986,249.4786937356578,-122.4166725458858,37.77058368591424,200.861526065149,-122.41356719855634,37.76809759526733,109.33339533952864,-122.42121310158235,37.78082881123047,253.40372959418653,-122.42910100057792,37.766648930036,245.5710659230963,-122.41222027217935,37.784012989345335,150.8775245361058,-122.42126381417286,37.772744355868674,403.97587754805585,-122.41648096937776,37.784525151547825,425.9926756586415,-122.41977234576504,37.7687403216948,437.8226588710712,-122.41241930973432,37.777408669003336,178.05237789272118,-122.42929948993267,37.77761290643905,69.27679453504928,-122.4236787989668,37.7725424698892,137.40481836301177,-122.4276214095449,37.77775590141013,323.162894473046,-122.42094247063066,37.76898175322312,418.47480464635305,-122.4159321704194,37.78257367935376,450.3711740559789,-122.41505904122586,37.771222026230944,357.9947103117194,-122.42739517259464,37.76651161624573,80.87044320281555,-122.42893778663064,37.765020940863685,111.74775422452969,-122.42157040539333,37.76813389106548,414.01728824800614,-122.4228370563897,37.782589574551935,165.9054765422826,-122.41063063575268,37.783229783022314,103.2458328514122,-122.42384334200872,37.783941248932784,382.3979241028214,-122.4275629932554,37.770041253843786,169.55530947627676,-122.41293547281506,37.77337540239862,107.17396260710176,-122.42722785195306,37.77193299744684,474.5765910349576,-122.41062828808442,37.77173698083835,268.4178028261374,-122.42432997967788,37.78371984645149,499.2210392918309,-122.41915142897248,37.77280106675714,307.1082045681254,-122.42241051760936,37.77987926301721,372.0376562301317,-122.41763827508292,37.77581391937626,276.44210153373376,-122.41809087267852,37.769220628807865,399.25246928607527,-122.42806744003178,37.77440200681384,499.9123148602107,-122.425675101234,37.77383452937406,301.4677557132446,-122.42232188665577,37.78444567646354,166.59419242195008,-122.4182353649944,37.76796289000168,253.726441983473,-122.42039233573922,37.7844082073537,472.6483226949583,-122.41224688023516,37.78284794636643,342.8975683057413];  // [lon,lat,alt, ...]
    console.log("Flat coords length:", flat.length, "First 6:", flat.slice(0, 6));
    const positions = [];
    for (let i = 0; i < flat.length; i += 3) {
      const lon = Number(flat[i]);
      const lat = Number(flat[i + 1]);
      const altRaw = Number(flat[i + 2]);
      if (!isFinite(lon) || !isFinite(lat)) continue;
      if (lon < -180 || lon > 180 || lat < -90 || lat > 90) continue;
      // lift by +30 m to ensure visibility above ground imagery/terrain
      const alt = (isFinite(altRaw) ? altRaw : 0) + 30.0;
      positions.push(Cesium.Cartesian3.fromDegrees(lon, lat, alt));
    }
    console.log("Valid UAV positions:", positions.length);
    if (positions.length === 0) {
      console.warn("No valid UAV positions parsed from CSV.");
    }

    // Static path line (so you always see a track)
    const pathEntity = viewer.entities.add({
      id: 'uav-path',
      name: 'UAV Path',
      polyline: {
        positions: positions,
        width: 4,
        material: new Cesium.PolylineGlowMaterialProperty({
          glowPower: 0.25,
          color: Cesium.Color.CYAN
        })
      }
    });
    viewer.zoomTo(pathEntity);

    // Animated point along the path
    const start = Cesium.JulianDate.now();
    const posProp = new Cesium.SampledPositionProperty();
    for (let i = 0; i < positions.length; i++) {
      const t = Cesium.JulianDate.addSeconds(start, i, new Cesium.JulianDate());
      posProp.addSample(t, positions[i]);
    }

    const uav = viewer.entities.add({
      id: 'uav',
      name: 'UAV',
      position: posProp,
      point: { pixelSize: 14, color: Cesium.Color.RED, outlineColor: Cesium.Color.BLACK, outlineWidth: 2 },
      path: {
        trailTime: Math.max(positions.length, 300),  // show long trail
        leadTime: 0,
        width: 4,
        material: new Cesium.PolylineGlowMaterialProperty({
          glowPower: 0.3,
          color: Cesium.Color.YELLOW
        })
      }
    });

    // Center camera on full track
    try {
      const bs = Cesium.BoundingSphere.fromPoints(positions);
      viewer.scene.camera.flyToBoundingSphere(bs, { duration: 1.2 });
    } catch (e) {
      viewer.zoomTo(viewer.entities);
    }

    // Clock and camera
    viewer.clock.startTime   = start.clone();
    viewer.clock.stopTime    = Cesium.JulianDate.addSeconds(start, positions.length, new Cesium.JulianDate());
    viewer.clock.currentTime = start.clone();
    viewer.clock.clockRange  = Cesium.ClockRange.CLAMPED;
    viewer.clock.multiplier  = 10;
    viewer.clock.shouldAnimate = true;
  </script>

<script>
  viewer.camera.flyTo({ destination : Cesium.Cartesian3.fromDegrees(-122.42152728959444, 37.77239080237695, Math.max(50.0, 218.13836831001433) + 300), duration: 3 });
</script>

</body>
</html>
